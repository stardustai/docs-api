---
title: '认证'
slug: 'authentication'
description: ''
hidden: false
createdAt: 'Thu May 16 2024 14:00:12 GMT+0000 (Coordinated Universal Time)'
updatedAt: 'Fri May 17 2024 14:57:59 GMT+0000 (Coordinated Universal Time)'
---

星尘使用 AccessKey 来允许访问星尘平台。AccessKey 由 AccessKey ID 和 AccessKey Secret 组成。

- AccessKey ID 用于识别用户。
- AccessKey Secret 用于验证用户身份。您必须对 AccessKey 保密。

## 获取您的 AccessKey

您可以通过您的账号向[dev@stardust.ai](mailto:dev@stardust.ai)发送邮件，要求提供您的 AccessKey，例如：

```json AK/SK
{
  "accessKey": "U2FsdGVkX19WZI4YdvcVgQWFQVdhwrtKyFjTHb8I4HcgIGlrymzcdVv7cnsCfpox",
  "secretKey": "U2FsdGVkX18NunM9ru5v57kHgE5QZzPvnXP7AJYi6Wdmmqf3DY858gRBFSjSC123"
}
```

## 认证方式

Stardust 使用“AccessKey 和非对称加密算法”对 API 调用进行认证。星尘希望AccessKey和数字签名能够包含在我们平台的所有API请求中。

### 请求结构

下表描述了有效 API 请求所需的 HTTP 标头字段。您必须为字段指定键值对。这些值区分大小写。

| 字段       | 描述                        | 示例                           |
| :--------- | :-------------------------- | :----------------------------- |
| X-星尘钥匙 | 用户的AccessKey ID。        | U2FsdGVkX19WZI4YdvcVgQWFQVd... |
| X-TS 系列  | HTTP 请求的标准时间戳标头。 | 整数（int64）： 1715948940207  |
| X-SIGN标志 | 签名。                      | MD5 字符串                     |

以下示例代码提供了签名的HTTP请求示例：

```json Header
X-STARDUST-KEY: U2FsdGVkX19WZI4YdvcVgQWFQVdhwrtKyFjTHb8I4HcgIGlrymzcdVv7cnsCfpoj
_ts: 1715948940207
_sign: 58454e54341403d16d2f5f219d869d8a
```

### Signature calculation

A signature string is generated by encrypting and encoding a signature message, which is constructed by "timestamp & AccessKey secret & AccessKey ID". The following sample code provides an example of how to calculate a signature.

```java
public class Md5Utils {

    /**
     * Encrypt content with MD5
     * @param content Content to be encrypted
     * @return Encryption result
     */
    public static String getMd5(String content) {
        MessageDigest messageDigest = null;
        try {
            messageDigest = MessageDigest.getInstance("MD5");
            messageDigest.reset();
            messageDigest.update(content.getBytes(StandardCharsets.UTF_8));
            byte[] byteArray = messageDigest.digest();

            StringBuilder md5StrBuff = new StringBuilder();

            for (byte b : byteArray) {
                if (Integer.toHexString(0xFF & b).length() == 1) {
                    md5StrBuff.append("0").append(Integer.toHexString(0xFF & b));
                } else {
                    md5StrBuff.append(Integer.toHexString(0xFF & b));
                }
            }
            return md5StrBuff.toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

  public static void main(String[] args) {
        String accessKey = "6y2fw7zeqgde3796rtbuk8ag9iyxmam6";
        String secretKey = "vgj5kz13hasie8c8irezz7u5fok3mzb6";
        Long createTime = System.currentTimeMillis();
        // Splice into a string to be encrypted
        String string = createTime + secretKey + accessKey;
        System.out.println(JSONUtil.toJsonStr(new BaseRequest(accessKey, Md5Utils.getMd5(string), createTime)));
    }
}
```
